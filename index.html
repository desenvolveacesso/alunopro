
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LexScholar - Gestão Acadêmica para Direito</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Source+Sans+Pro:wght@300;400;600&display=swap">
    <style>
        /* Estilos anteriores mantidos */
        :root {
            --primary: #1a3a63;
            --secondary: #8c6d46;
            --accent: #c41e3a;
            --light: #f5f5f5;
            --dark: #333;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Source Sans Pro', sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }
        
        /* Menu Responsivo */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 15px;
            left: 20px;
            background-color: var(--primary);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 2000;
            font-size: 20px;
        }

        /* Sidebar */
        .sidebar {
            background-color: var(--primary);
            color: white;
            padding: 20px;
            position: fixed;
            width: 250px;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo i {
            font-size: 24px;
            margin-right: 10px;
            color: var(--secondary);
        }

        .logo h1 {
            font-size: 20px;
            font-weight: 600;
            font-family: 'Playfair Display', serif;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-item:hover, .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .menu-item i {
            margin-right: 10px;
            font-size: 18px;
        }

        /* Main Content */
        .main-content {
            grid-column: 2;
            padding: 20px;
        }

        .panel {
            display: none;
        }

        .panel.active {
            display: block;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
        }

        .date-display {
            font-size: 16px;
            color: var(--gray);
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #12294d;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #735a38;
        }

        /* Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(26, 58, 99, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        /* Tasks */
        .task-item, .item-list-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            gap: 10px;
        }
        
        .item-list-row {
            flex-wrap: wrap;
        }

        .item-list-row:last-child {
            border-bottom: none;
        }
        
        .task-info, .item-info {
            flex: 1;
        }

        .task-title, .item-title {
            font-weight: 500;
        }

        .task-due, .item-due {
            font-size: 12px;
            color: var(--gray);
        }
        
        .item-actions {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            font-size: 16px;
            color: var(--gray);
            transition: color 0.3s;
        }

        .action-btn:hover {
            color: var(--primary);
        }

        .action-btn.edit:hover {
            color: var(--secondary);
        }
        
        .action-btn.delete:hover {
            color: var(--danger);
        }
        
        .action-btn.grade:hover {
            color: var(--success);
        }

        .task-priority, .item-priority {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 20px;
            margin-left: 10px;
        }

        .priority-high {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger);
        }

        .priority-medium {
            background-color: rgba(255, 193, 7, 0.1);
            color: var(--warning);
        }

        .priority-low {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success);
        }

        /* Schedule */
        .schedule-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .day-column {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 15px;
        }

        .day-header {
            text-align: center;
            padding-bottom: 10px;
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            font-weight: 600;
            color: var(--primary);
        }

        .class-item {
            background-color: rgba(26, 58, 99, 0.1);
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .class-time {
            font-weight: 600;
            color: var(--primary);
        }
        
        .class-item .item-actions {
            justify-content: flex-end;
            margin-top: 10px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.3s;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-body {
            padding: 20px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* New Grade Input */
        .grade-section {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .grade-section label {
            white-space: nowrap;
        }
        
        .grade-section input {
            width: 100px;
        }
        
        .grade-display {
            font-weight: bold;
            color: var(--success);
            margin-left: 10px;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                left: -250px;
                transition: left 0.3s ease;
                box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
            }
            
            .sidebar.active {
                left: 0;
            }
            
            .menu-toggle {
                display: block;
            }

            .main-content {
                grid-column: 1;
            }
            
            .schedule-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .form-row, .form-row-2 {
                flex-direction: column;
                gap: 0;
            }
            
            .form-row-2 > div {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .schedule-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
            }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--success);
            color: white;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 3000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.error {
            background-color: var(--danger);
        }

        .toast.warning {
            background-color: var(--warning);
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 30px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            color: var(--light-gray);
        }

        /* Lists */
        .item-list {
            padding: 10px;
            background-color: var(--light);
            border-radius: 8px;
        }
        
        .total-hours-card {
            background-color: var(--primary);
            color: white;
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }
        
        .total-hours-card h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .total-hours-card .hours-value {
            font-size: 32px;
            font-weight: 700;
        }

        /* Novos estilos para a grade curricular */
        .curriculum-info {
            font-size: 12px;
            color: var(--gray);
            margin-top: 5px;
        }

    </style>
</head>
<body>
    <div class="menu-toggle">
        <i class="fas fa-bars"></i>
    </div>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <i class="fas fa-scale-balanced"></i>
                <h1>LexScholar</h1>
            </div>
            
            <div class="menu-item active" data-target="dashboard-panel">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </div>
            
            <div class="menu-item" data-target="schedule-panel">
                <i class="fas fa-calendar-days"></i>
                <span>Agenda</span>
            </div>
            
            <div class="menu-item" data-target="subjects-panel">
                <i class="fas fa-book"></i>
                <span>Disciplinas</span>
            </div>
            
            <div class="menu-item" data-target="assignments-panel">
                <i class="fas fa-file-lines"></i>
                <span>Trabalhos</span>
            </div>
            
            <div class="menu-item" data-target="exams-panel">
                <i class="fas fa-pen-to-square"></i>
                <span>Provas</span>
            </div>
            
            <div class="menu-item" data-target="timetable-panel">
                <i class="fas fa-clock"></i>
                <span>Quadro de Horários</span>
            </div>
            
            <div class="menu-item" data-target="semesters-panel">
                <i class="fas fa-graduation-cap"></i>
                <span>Semestres</span>
            </div>
            
            <div class="menu-item" data-target="extra-hours-panel">
                <i class="fas fa-award"></i>
                <span>Horas Complementares</span>
            </div>
            
            <div class="menu-item" data-target="settings-panel">
                <i class="fas fa-gear"></i>
                <span>Configurações</span>
            </div>
        </div>
        
        <div class="main-content">
            <div id="dashboard-panel" class="panel active">
                <div class="header">
                    <h2 class="page-title">Dashboard</h2>
                    <div class="date-display"></div>
                    <div class="actions">
                        <button class="btn btn-primary" id="add-task-btn">
                            <i class="fas fa-plus"></i> Nova Tarefa
                        </button>
                        <button class="btn btn-secondary" id="add-class-btn">
                            <i class="fas fa-plus"></i> Nova Aula
                        </button>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Próximas Provas</h3>
                            <div class="card-icon">
                                <i class="fas fa-pen-to-square"></i>
                            </div>
                        </div>
                        <div class="task-list" id="exam-list"></div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Trabalhos Pendentes</h3>
                            <div class="card-icon">
                                <i class="fas fa-file-lines"></i>
                            </div>
                        </div>
                        <div class="task-list" id="assignment-list"></div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Compromissos</h3>
                            <div class="card-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                        </div>
                        <div class="task-list" id="appointment-list"></div>
                    </div>
                </div>
            </div>

            <div id="schedule-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Agenda</h2>
                    <div class="actions">
                        <button class="btn btn-primary" id="add-task-btn-schedule">
                            <i class="fas fa-plus"></i> Nova Tarefa
                        </button>
                        <button class="btn btn-secondary" id="add-class-btn-schedule">
                            <i class="fas fa-plus"></i> Nova Aula
                        </button>
                    </div>
                </div>
                <div class="schedule-grid">
                    <div class="day-column">
                        <div class="day-header">Segunda</div>
                        <div class="class-list" data-day="monday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Terça</div>
                        <div class="class-list" data-day="tuesday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Quarta</div>
                        <div class="class-list" data-day="wednesday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Quinta</div>
                        <div class="class-list" data-day="thursday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Sexta</div>
                        <div class="class-list" data-day="friday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Sábado</div>
                        <div class="class-list" data-day="saturday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Domingo</div>
                        <div class="class-list" data-day="sunday"></div>
                    </div>
                </div>
            </div>

            <div id="subjects-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Disciplinas</h2>
                    <div class="actions">
                        <button class="btn btn-primary" id="add-subject-btn">
                            <i class="fas fa-plus"></i> Nova Disciplina
                        </button>
                    </div>
                </div>
                <div class="item-list" id="subjects-full-list"></div>
            </div>

            <div id="assignments-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Trabalhos</h2>
                    <div class="actions">
                        <button class="btn btn-primary" id="add-assignment-btn">
                            <i class="fas fa-plus"></i> Novo Trabalho
                        </button>
                    </div>
                </div>
                <div class="item-list" id="assignments-full-list"></div>
            </div>
            
            <div id="exams-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Provas</h2>
                    <div class="actions">
                        <button class="btn btn-primary" id="add-exam-btn">
                            <i class="fas fa-plus"></i> Nova Prova
                        </button>
                    </div>
                </div>
                <div class="item-list" id="exams-full-list"></div>
            </div>
            
            <div id="timetable-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Quadro de Horários</h2>
                    <div class="actions">
                        <button class="btn btn-secondary" id="add-class-btn-timetable">
                            <i class="fas fa-plus"></i> Nova Aula
                        </button>
                    </div>
                </div>
                <div class="schedule-grid" id="timetable-grid">
                    <div class="day-column">
                        <div class="day-header">Segunda</div>
                        <div class="class-list" data-day="monday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Terça</div>
                        <div class="class-list" data-day="tuesday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Quarta</div>
                        <div class="class-list" data-day="wednesday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Quinta</div>
                        <div class="class-list" data-day="thursday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Sexta</div>
                        <div class="class-list" data-day="friday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Sábado</div>
                        <div class="class-list" data-day="saturday"></div>
                    </div>
                    
                    <div class="day-column">
                        <div class="day-header">Domingo</div>
                        <div class="class-list" data-day="sunday"></div>
                    </div>
                </div>
            </div>

            <div id="semesters-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Semestres</h2>
                    <div class="actions">
                        <button class="btn btn-primary" id="add-semester-btn">
                            <i class="fas fa-plus"></i> Novo Semestre
                        </button>
                    </div>
                </div>
                <div class="item-list" id="semesters-list"></div>
            </div>
            
            <div id="extra-hours-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Horas Complementares</h2>
                    <div class="actions">
                        <button class="btn btn-primary" id="add-extra-hours-btn">
                            <i class="fas fa-plus"></i> Nova Atividade
                        </button>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="total-hours-card">
                        <h3>Total de Horas Adquiridas</h3>
                        <div class="hours-value" id="total-extra-hours">0</div>
                    </div>
                    <div class="total-hours-card" style="background-color: var(--secondary);">
                        <h3>Horas Restantes</h3>
                        <div class="hours-value" id="remaining-hours">0</div>
                    </div>
                </div>
                <div class="item-list" id="extra-hours-list"></div>
            </div>
            
            <div id="settings-panel" class="panel">
                <div class="header">
                    <h2 class="page-title">Configurações</h2>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Opções de Usuário</h3>
                    </div>
                    <form>
                        <div class="form-group">
                            <label class="form-label">Tema</label>
                            <select class="form-select">
                                <option>Padrão</option>
                                <option>Escuro</option>
                                <option>Claro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Idioma</label>
                            <select class="form-select">
                                <option>Português (Brasil)</option>
                                <option>English (US)</option>
                            </select>
                        </div>
                    </form>
                    <div class="card-header" style="margin-top: 20px;">
                        <h3 class="card-title">Horas Complementares</h3>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Horas complementares necessárias (total)</label>
                        <input type="number" step="1" min="0" class="form-input" id="required-hours-input" placeholder="Ex: 200">
                    </div>
                    <div class="card-header" style="margin-top: 20px;">
                        <h3 class="card-title">Backup de Dados</h3>
                    </div>
                    <div class="actions" style="margin-top: 10px;">
                        <button class="btn btn-primary" id="export-btn">
                            <i class="fas fa-download"></i> Exportar Backup
                        </button>
                        <button class="btn btn-secondary" id="import-btn">
                            <i class="fas fa-upload"></i> Importar Backup
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="task-modal-title">Adicionar Nova Tarefa</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="task-form">
                    <input type="hidden" id="task-id">
                    <div class="form-group">
                        <label class="form-label">Título da Tarefa *</label>
                        <input type="text" class="form-input" id="task-title" placeholder="Ex: Resumo de Direito Civil" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tipo *</label>
                        <select class="form-select" id="task-type" required>
                            <option value="">Selecione o tipo</option>
                            <option value="exam">Prova</option>
                            <option value="assignment">Trabalho</option>
                            <option value="appointment">Compromisso</option>
                            <option value="other">Outro</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Disciplina</label>
                        <select class="form-select" id="task-subject">
                            <option value="">Selecione a disciplina</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Data *</label>
                            <input type="date" class="form-input" id="task-date" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Hora</label>
                            <input type="time" class="form-input" id="task-time">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Prioridade *</label>
                        <select class="form-select" id="task-priority" required>
                            <option value="">Selecione a prioridade</option>
                            <option value="high">Alta</option>
                            <option value="medium">Média</option>
                            <option value="low">Baixa</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descrição</label>
                        <textarea class="form-textarea" id="task-description" placeholder="Detalhes da tarefa..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-task">Cancelar</button>
                <button class="btn btn-primary" id="save-task">Salvar Tarefa</button>
            </div>
        </div>
    </div>

    <div class="modal" id="class-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="class-modal-title">Adicionar Nova Aula</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="class-form">
                    <input type="hidden" id="class-id">
                    <div class="form-group">
                        <label class="form-label">Disciplina *</label>
                        <select class="form-select" id="class-subject" required>
                            <option value="">Selecione a disciplina</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Dia da Semana *</label>
                        <select class="form-select" id="class-day" required>
                            <option value="">Selecione o dia</option>
                            <option value="monday">Segunda-feira</option>
                            <option value="tuesday">Terça-feira</option>
                            <option value="wednesday">Quarta-feira</option>
                            <option value="thursday">Quinta-feira</option>
                            <option value="friday">Sexta-feira</option>
                            <option value="saturday">Sábado</option>
                            <option value="sunday">Domingo</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Hora de Início *</label>
                            <input type="time" class="form-input" id="class-start" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Hora de Término *</label>
                            <input type="time" class="form-input" id="class-end" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Local</label>
                        <input type="text" class="form-input" id="class-location" placeholder="Ex: Sala 102">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Professor</label>
                        <input type="text" class="form-input" id="class-professor" placeholder="Nome do professor">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-class">Cancelar</button>
                <button class="btn btn-primary" id="save-class">Salvar Aula</button>
            </div>
        </div>
    </div>

    <div class="modal" id="subject-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="subject-modal-title">Adicionar Nova Disciplina</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="subject-form">
                    <input type="hidden" id="subject-id">
                    <div class="form-group">
                        <label class="form-label">Nome da Disciplina *</label>
                        <input type="text" class="form-input" id="subject-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Dia da Semana *</label>
                        <select class="form-select" id="subject-day" required>
                            <option value="">Selecione o dia</option>
                            <option value="monday">Segunda-feira</option>
                            <option value="tuesday">Terça-feira</option>
                            <option value="wednesday">Quarta-feira</option>
                            <option value="thursday">Quinta-feira</option>
                            <option value="friday">Sexta-feira</option>
                            <option value="saturday">Sábado</option>
                            <option value="sunday">Domingo</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Hora de Início *</label>
                            <input type="time" class="form-input" id="subject-start" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Hora de Término *</label>
                            <input type="time" class="form-input" id="subject-end" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Grade Curricular</label>
                        <textarea class="form-textarea" id="subject-curriculum" placeholder="Conteúdo programático da disciplina..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-subject">Cancelar</button>
                <button class="btn btn-primary" id="save-subject">Salvar Disciplina</button>
            </div>
        </div>
    </div>

    <div class="modal" id="semester-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="semester-modal-title">Adicionar Novo Semestre</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="semester-form">
                    <input type="hidden" id="semester-id">
                    <div class="form-group">
                        <label class="form-label">Nome do Semestre *</label>
                        <input type="text" class="form-input" id="semester-name" placeholder="Ex: 2023.2" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Início *</label>
                            <input type="date" class="form-input" id="semester-start" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fim *</label>
                            <input type="date" class="form-input" id="semester-end" required>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-semester">Cancelar</button>
                <button class="btn btn-primary" id="save-semester">Salvar Semestre</button>
            </div>
        </div>
    </div>

    <div class="modal" id="extra-hours-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="extra-hours-modal-title">Adicionar Nova Atividade</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="extra-hours-form">
                    <input type="hidden" id="extra-hours-id">
                    <div class="form-group">
                        <label class="form-label">Nome da Atividade *</label>
                        <input type="text" class="form-input" id="extra-hours-name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Tipo de Atividade</label>
                        <select class="form-select" id="extra-hours-type">
                            <option value="">Selecione o tipo</option>
                            <option value="course">Curso</option>
                            <option value="event">Evento</option>
                            <option value="workshop">Workshop</option>
                            <option value="lecture">Palestra</option>
                            <option value="other">Outro</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Data *</label>
                            <input type="date" class="form-input" id="extra-hours-date" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Horas *</label>
                            <input type="number" step="0.5" min="0" class="form-input" id="extra-hours-hours" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descrição</label>
                        <textarea class="form-textarea" id="extra-hours-description" placeholder="Detalhes da atividade..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-extra-hours">Cancelar</button>
                <button class="btn btn-primary" id="save-extra-hours">Salvar Atividade</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Operação realizada com sucesso!</span>
    </div>

    <script>
        // Dados de exemplo - MODIFICADO para incluir informações de horário e grade curricular
        let subjects = [
            { 
                id: 1, 
                name: "Direito Civil", 
                day: "monday", 
                start: "08:00", 
                end: "10:00", 
                curriculum: "Introdução ao Direito Civil. Lei de Introdução às normas do Direito Brasileiro. Pessoas naturais e jurídicas. Bens. Fatos jurídicos. Negócios jurídicos. Prescrição e decadência. Provas." 
            },
            { 
                id: 2, 
                name: "Direito Penal", 
                day: "tuesday", 
                start: "10:00", 
                end: "12:00", 
                curriculum: "Introdução ao Direito Penal. Aplicação da Lei Penal. Teoria do Crime. Tipicidade, antijuridicidade e culpabilidade. Concurso de pessoas e de crimes. Penas. Ação penal." 
            },
            { 
                id: 3, 
                name: "Direito Constitucional", 
                day: "wednesday", 
                start: "14:00", 
                end: "16:00", 
                curriculum: "Teoria da Constituição. Controle de constitucionalidade. Direitos fundamentais. Organização do Estado. Organização dos Poderes. Defesa do Estado e das instituições democráticas." 
            },
            { 
                id: 4, 
                name: "Direito Administrativo", 
                day: "thursday", 
                start: "16:00", 
                end: "18:00", 
                curriculum: "Introdução ao Direito Administrativo. Administração Pública. Atos administrativos. Poderes administrativos. Serviços públicos. Bens públicos. Responsabilidade civil do Estado." 
            }
        ];

        let classes = [
            { id: 1, subjectId: 1, day: "monday", start: "08:00", end: "10:00", location: "Sala 101", professor: "Dr. Silva" },
            { id: 2, subjectId: 2, day: "tuesday", start: "10:00", end: "12:00", location: "Sala 102", professor: "Dra. Costa" },
            { id: 3, subjectId: 3, day: "wednesday", start: "14:00", end: "16:00", location: "Sala 103", professor: "Dr. Oliveira" },
            { id: 4, subjectId: 4, day: "thursday", start: "16:00", end: "18:00", location: "Sala 104", professor: "Dra. Santos" }
        ];

        let tasks = [
            { id: 1, title: "Prova de Direito Civil", type: "exam", subjectId: 1, date: "2023-10-20", time: "14:00", priority: "high", description: "Estudar capítulos 1 a 5" },
            { id: 2, title: "Trabalho de Penal", type: "assignment", subjectId: 2, date: "2023-10-15", time: "", priority: "medium", description: "Caso concreto sobre homicídio" },
            { id: 3, title: "Reunião com grupo", type: "appointment", subjectId: null, date: "2023-10-12", time: "16:00", priority: "low", description: "Biblioteca central" }
        ];

        let semesters = [
            { id: 1, name: "2023.2", start: "2023-08-01", end: "2023-12-15" }
        ];

        let extraHours = [
            { id: 1, name: "Palestra sobre Direitos Humanos", type: "lecture", date: "2023-09-15", hours: 4, description: "Universidade Federal" },
            { id: 2, name: "Curso de Mediação de Conflitos", type: "course", date: "2023-10-05", hours: 20, description: "Online" }
        ];

        // Função para carregar disciplinas nos selects
        function loadSubjectsToSelects() {
            const subjectSelects = document.querySelectorAll('select[id$="-subject"]');
            subjectSelects.forEach(select => {
                // Salvar o valor atual
                const currentValue = select.value;
                
                // Limpar opções existentes, mantendo a primeira
                while (select.options.length > 1) {
                    select.remove(1);
                }
                
                // Adicionar disciplinas
                subjects.forEach(subject => {
                    const option = document.createElement('option');
                    option.value = subject.id;
                    option.textContent = subject.name;
                    select.appendChild(option);
                });
                
                // Restaurar o valor anterior, se ainda existir
                if (currentValue && Array.from(select.options).some(opt => opt.value === currentValue)) {
                    select.value = currentValue;
                }
            });
        }

        // Função para carregar aulas no quadro de horários - MODIFICADA para exibir informações da disciplina
        function loadClassesToTimetable() {
            // Limpar todos os dias
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            days.forEach(day => {
                const dayElement = document.querySelector(`.class-list[data-day="${day}"]`);
                if (dayElement) {
                    dayElement.innerHTML = '';
                }
            });
            
            // Adicionar aulas aos respectivos dias
            classes.forEach(classItem => {
                const subject = subjects.find(s => s.id === classItem.subjectId);
                if (!subject) return;
                
                const dayElement = document.querySelector(`.class-list[data-day="${classItem.day}"]`);
                if (dayElement) {
                    const classElement = document.createElement('div');
                    classElement.className = 'class-item';
                    classElement.innerHTML = `
                        <div class="class-time">${classItem.start} - ${classItem.end}</div>
                        <div class="class-subject">${subject.name}</div>
                        <div class="class-location">${classItem.location}</div>
                        <div class="class-professor">${classItem.professor}</div>
                        ${subject.curriculum ? `<div class="curriculum-info">${subject.curriculum}</div>` : ''}
                        <div class="item-actions">
                            <button class="action-btn edit" data-id="${classItem.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" data-id="${classItem.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    dayElement.appendChild(classElement);
                }
            });
            
            // Adicionar event listeners para os botões de editar e excluir
            document.querySelectorAll('.class-item .action-btn.edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const classId = parseInt(e.currentTarget.getAttribute('data-id'));
                    editClass(classId);
                });
            });
            
            document.querySelectorAll('.class-item .action-btn.delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const classId = parseInt(e.currentTarget.getAttribute('data-id'));
                    deleteClass(classId);
                });
            });
        }

        // Função para carregar tarefas
        function loadTasks() {
            // Carregar provas
            const examList = document.getElementById('exam-list');
            examList.innerHTML = '';
            
            const exams = tasks.filter(task => task.type === 'exam');
            if (exams.length === 0) {
                examList.innerHTML = '<div class="empty-state"><i class="fas fa-pen-to-square"></i><p>Nenhuma prova agendada</p></div>';
            } else {
                exams.slice(0, 3).forEach(task => {
                    const subject = subjects.find(s => s.id === task.subjectId);
                    const taskElement = document.createElement('div');
                    taskElement.className = 'task-item';
                    taskElement.innerHTML = `
                        <div class="task-info">
                            <div class="task-title">${task.title}</div>
                            <div class="task-due">${formatDate(task.date)} ${task.time ? `às ${task.time}` : ''}</div>
                        </div>
                        <span class="task-priority priority-${task.priority}">${getPriorityText(task.priority)}</span>
                    `;
                    examList.appendChild(taskElement);
                });
            }
            
            // Carregar trabalhos
            const assignmentList = document.getElementById('assignment-list');
            assignmentList.innerHTML = '';
            
            const assignments = tasks.filter(task => task.type === 'assignment');
            if (assignments.length === 0) {
                assignmentList.innerHTML = '<div class="empty-state"><i class="fas fa-file-lines"></i><p>Nenhum trabalho pendente</p></div>';
            } else {
                assignments.slice(0, 3).forEach(task => {
                    const subject = subjects.find(s => s.id === task.subjectId);
                    const taskElement = document.createElement('div');
                    taskElement.className = 'task-item';
                    taskElement.innerHTML = `
                        <div class="task-info">
                            <div class="task-title">${task.title}</div>
                            <div class="task-due">${formatDate(task.date)} ${task.time ? `às ${task.time}` : ''}</div>
                        </div>
                        <span class="task-priority priority-${task.priority}">${getPriorityText(task.priority)}</span>
                    `;
                    assignmentList.appendChild(taskElement);
                });
            }
            
            // Carregar compromissos
            const appointmentList = document.getElementById('appointment-list');
            appointmentList.innerHTML = '';
            
            const appointments = tasks.filter(task => task.type === 'appointment');
            if (appointments.length === 0) {
                appointmentList.innerHTML = '<div class="empty-state"><i class="fas fa-calendar-check"></i><p>Nenhum compromisso</p></div>';
            } else {
                appointments.slice(0, 3).forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = 'task-item';
                    taskElement.innerHTML = `
                        <div class="task-info">
                            <div class="task-title">${task.title}</div>
                            <div class="task-due">${formatDate(task.date)} ${task.time ? `às ${task.time}` : ''}</div>
                        </div>
                        <span class="task-priority priority-${task.priority}">${getPriorityText(task.priority)}</span>
                    `;
                    appointmentList.appendChild(taskElement);
                });
            }
            
            // Carregar lista completa de provas
            const examsFullList = document.getElementById('exams-full-list');
            examsFullList.innerHTML = '';
            
            if (exams.length === 0) {
                examsFullList.innerHTML = '<div class="empty-state"><i class="fas fa-pen-to-square"></i><p>Nenhuma prova agendada</p></div>';
            } else {
                exams.forEach(task => {
                    const subject = subjects.find(s => s.id === task.subjectId);
                    const taskElement = document.createElement('div');
                    taskElement.className = 'item-list-row';
                    taskElement.innerHTML = `
                        <div class="item-info">
                            <div class="item-title">${task.title}</div>
                            <div class="item-due">${formatDate(task.date)} ${task.time ? `às ${task.time}` : ''}${subject ? ` | ${subject.name}` : ''}</div>
                        </div>
                        <span class="item-priority priority-${task.priority}">${getPriorityText(task.priority)}</span>
                        <div class="item-actions">
                            <button class="action-btn edit" data-id="${task.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" data-id="${task.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    examsFullList.appendChild(taskElement);
                });
            }
            
            // Carregar lista completa de trabalhos
            const assignmentsFullList = document.getElementById('assignments-full-list');
            assignmentsFullList.innerHTML = '';
            
            if (assignments.length === 0) {
                assignmentsFullList.innerHTML = '<div class="empty-state"><i class="fas fa-file-lines"></i><p>Nenhum trabalho pendente</p></div>';
            } else {
                assignments.forEach(task => {
                    const subject = subjects.find(s => s.id === task.subjectId);
                    const taskElement = document.createElement('div');
                    taskElement.className = 'item-list-row';
                    taskElement.innerHTML = `
                        <div class="item-info">
                            <div class="item-title">${task.title}</div>
                            <div class="item-due">${formatDate(task.date)} ${task.time ? `às ${task.time}` : ''}${subject ? ` | ${subject.name}` : ''}</div>
                        </div>
                        <span class="item-priority priority-${task.priority}">${getPriorityText(task.priority)}</span>
                        <div class="item-actions">
                            <button class="action-btn edit" data-id="${task.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" data-id="${task.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    assignmentsFullList.appendChild(taskElement);
                });
            }
            
            // Adicionar event listeners para os botões de editar e excluir
            document.querySelectorAll('#exams-full-list .action-btn.edit, #assignments-full-list .action-btn.edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const taskId = parseInt(e.currentTarget.getAttribute('data-id'));
                    editTask(taskId);
                });
            });
            
            document.querySelectorAll('#exams-full-list .action-btn.delete, #assignments-full-list .action-btn.delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const taskId = parseInt(e.currentTarget.getAttribute('data-id'));
                    deleteTask(taskId);
                });
            });
        }

        // Função para carregar disciplinas - MODIFICADA para exibir informações adicionais
        function loadSubjects() {
            const subjectsFullList = document.getElementById('subjects-full-list');
            subjectsFullList.innerHTML = '';
            
            if (subjects.length === 0) {
                subjectsFullList.innerHTML = '<div class="empty-state"><i class="fas fa-book"></i><p>Nenhuma disciplina cadastrada</p></div>';
            } else {
                subjects.forEach(subject => {
                    const subjectElement = document.createElement('div');
                    subjectElement.className = 'item-list-row';
                    
                    // Obter texto do dia da semana
                    const dayText = getDayText(subject.day);
                    
                    subjectElement.innerHTML = `
                        <div class="item-info">
                            <div class="item-title">${subject.name}</div>
                            <div class="item-due">${dayText} | ${subject.start} - ${subject.end}</div>
                            ${subject.curriculum ? `<div class="curriculum-info">${subject.curriculum}</div>` : ''}
                        </div>
                        <div class="item-actions">
                            <button class="action-btn edit" data-id="${subject.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" data-id="${subject.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    subjectsFullList.appendChild(subjectElement);
                });
            }
            
            // Adicionar event listeners para os botões de editar e excluir
            document.querySelectorAll('#subjects-full-list .action-btn.edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const subjectId = parseInt(e.currentTarget.getAttribute('data-id'));
                    editSubject(subjectId);
                });
            });
            
            document.querySelectorAll('#subjects-full-list .action-btn.delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const subjectId = parseInt(e.currentTarget.getAttribute('data-id'));
                    deleteSubject(subjectId);
                });
            });
        }

        // Função para carregar semestres
        function loadSemesters() {
            const semestersList = document.getElementById('semesters-list');
            semestersList.innerHTML = '';
            
            if (semesters.length === 0) {
                semestersList.innerHTML = '<div class="empty-state"><i class="fas fa-graduation-cap"></i><p>Nenhum semestre cadastrado</p></div>';
            } else {
                semesters.forEach(semester => {
                    const semesterElement = document.createElement('div');
                    semesterElement.className = 'item-list-row';
                    semesterElement.innerHTML = `
                        <div class="item-info">
                            <div class="item-title">${semester.name}</div>
                            <div class="item-due">${formatDate(semester.start)} a ${formatDate(semester.end)}</div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn edit" data-id="${semester.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" data-id="${semester.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    semestersList.appendChild(semesterElement);
                });
            }
            
            // Adicionar event listeners para os botões de editar e excluir
            document.querySelectorAll('#semesters-list .action-btn.edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const semesterId = parseInt(e.currentTarget.getAttribute('data-id'));
                    editSemester(semesterId);
                });
            });
            
            document.querySelectorAll('#semesters-list .action-btn.delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const semesterId = parseInt(e.currentTarget.getAttribute('data-id'));
                    deleteSemester(semesterId);
                });
            });
        }

        // Função para carregar horas complementares
        function loadExtraHours() {
            const extraHoursList = document.getElementById('extra-hours-list');
            extraHoursList.innerHTML = '';
            
            if (extraHours.length === 0) {
                extraHoursList.innerHTML = '<div class="empty-state"><i class="fas fa-award"></i><p>Nenhuma atividade cadastrada</p></div>';
            } else {
                extraHours.forEach(activity => {
                    const activityElement = document.createElement('div');
                    activityElement.className = 'item-list-row';
                    activityElement.innerHTML = `
                        <div class="item-info">
                            <div class="item-title">${activity.name}</div>
                            <div class="item-due">${formatDate(activity.date)} | ${activity.hours} horas${activity.type ? ` | ${getActivityTypeText(activity.type)}` : ''}</div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn edit" data-id="${activity.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" data-id="${activity.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    extraHoursList.appendChild(activityElement);
                });
            }
            
            // Calcular total de horas
            const totalHours = extraHours.reduce((sum, activity) => sum + activity.hours, 0);
            document.getElementById('total-extra-hours').textContent = totalHours;
            
            // Calcular horas restantes (assumindo 200 horas necessárias)
            const requiredHours = 200; // Valor padrão
            document.getElementById('remaining-hours').textContent = Math.max(0, requiredHours - totalHours);
            
            // Adicionar event listeners para os botões de editar e excluir
            document.querySelectorAll('#extra-hours-list .action-btn.edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const activityId = parseInt(e.currentTarget.getAttribute('data-id'));
                    editExtraHours(activityId);
                });
            });
            
            document.querySelectorAll('#extra-hours-list .action-btn.delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const activityId = parseInt(e.currentTarget.getAttribute('data-id'));
                    deleteExtraHours(activityId);
                });
            });
        }

        // Funções utilitárias
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function getPriorityText(priority) {
            const priorities = {
                'high': 'Alta',
                'medium': 'Média',
                'low': 'Baixa'
            };
            return priorities[priority] || priority;
        }

        function getActivityTypeText(type) {
            const types = {
                'course': 'Curso',
                'event': 'Evento',
                'workshop': 'Workshop',
                'lecture': 'Palestra',
                'other': 'Outro'
            };
            return types[type] || type;
        }

        // Nova função para obter texto do dia da semana
        function getDayText(day) {
            const days = {
                'monday': 'Segunda-feira',
                'tuesday': 'Terça-feira',
                'wednesday': 'Quarta-feira',
                'thursday': 'Quinta-feira',
                'friday': 'Sexta-feira',
                'saturday': 'Sábado',
                'sunday': 'Domingo'
            };
            return days[day] || day;
        }

        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            
            if (isError) {
                toast.classList.add('error');
            } else {
                toast.classList.remove('error');
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Funções para manipulação de dados
        function addTask(taskData) {
            const newId = tasks.length > 0 ? Math.max(...tasks.map(t => t.id)) + 1 : 1;
            tasks.push({ id: newId, ...taskData });
            saveToLocalStorage();
            loadTasks();
            showToast('Tarefa adicionada com sucesso!');
        }

        function editTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            document.getElementById('task-modal-title').textContent = 'Editar Tarefa';
            document.getElementById('task-id').value = task.id;
            document.getElementById('task-title').value = task.title;
            document.getElementById('task-type').value = task.type;
            document.getElementById('task-subject').value = task.subjectId || '';
            document.getElementById('task-date').value = task.date;
            document.getElementById('task-time').value = task.time || '';
            document.getElementById('task-priority').value = task.priority;
            document.getElementById('task-description').value = task.description || '';
            
            openModal('task-modal');
        }

        function updateTask(taskId, taskData) {
            const index = tasks.findIndex(t => t.id === taskId);
            if (index === -1) return;
            
            tasks[index] = { id: taskId, ...taskData };
            saveToLocalStorage();
            loadTasks();
            showToast('Tarefa atualizada com sucesso!');
        }

        function deleteTask(taskId) {
            if (confirm('Tem certeza que deseja excluir esta tarefa?')) {
                tasks = tasks.filter(t => t.id !== taskId);
                saveToLocalStorage();
                loadTasks();
                showToast('Tarefa excluída com sucesso!');
            }
        }

        function addClass(classData) {
            const newId = classes.length > 0 ? Math.max(...classes.map(c => c.id)) + 1 : 1;
            classes.push({ id: newId, ...classData });
            saveToLocalStorage();
            loadClassesToTimetable();
            showToast('Aula adicionada com sucesso!');
        }

        function editClass(classId) {
            const classItem = classes.find(c => c.id === classId);
            if (!classItem) return;
            
            document.getElementById('class-modal-title').textContent = 'Editar Aula';
            document.getElementById('class-id').value = classItem.id;
            document.getElementById('class-subject').value = classItem.subjectId;
            document.getElementById('class-day').value = classItem.day;
            document.getElementById('class-start').value = classItem.start;
            document.getElementById('class-end').value = classItem.end;
            document.getElementById('class-location').value = classItem.location || '';
            document.getElementById('class-professor').value = classItem.professor || '';
            
            openModal('class-modal');
        }

        function updateClass(classId, classData) {
            const index = classes.findIndex(c => c.id === classId);
            if (index === -1) return;
            
            classes[index] = { id: classId, ...classData };
            saveToLocalStorage();
            loadClassesToTimetable();
            showToast('Aula atualizada com sucesso!');
        }

        function deleteClass(classId) {
            if (confirm('Tem certeza que deseja excluir esta aula?')) {
                classes = classes.filter(c => c.id !== classId);
                saveToLocalStorage();
                loadClassesToTimetable();
                showToast('Aula excluída com sucesso!');
            }
        }

        // MODIFICADA para incluir informações adicionais da disciplina
        function addSubject(subjectData) {
            const newId = subjects.length > 0 ? Math.max(...subjects.map(s => s.id)) + 1 : 1;
            subjects.push({ id: newId, ...subjectData });
            saveToLocalStorage();
            loadSubjects();
            loadSubjectsToSelects();
            
            // Se a disciplina tiver dia e horário, criar uma aula automaticamente
            if (subjectData.day && subjectData.start && subjectData.end) {
                const classData = {
                    subjectId: newId,
                    day: subjectData.day,
                    start: subjectData.start,
                    end: subjectData.end,
                    location: "",
                    professor: ""
                };
                addClass(classData);
            }
            
            showToast('Disciplina adicionada com sucesso!');
        }

        // MODIFICADA para editar informações adicionais da disciplina
        function editSubject(subjectId) {
            const subject = subjects.find(s => s.id === subjectId);
            if (!subject) return;
            
            document.getElementById('subject-modal-title').textContent = 'Editar Disciplina';
            document.getElementById('subject-id').value = subject.id;
            document.getElementById('subject-name').value = subject.name;
            document.getElementById('subject-day').value = subject.day || '';
            document.getElementById('subject-start').value = subject.start || '';
            document.getElementById('subject-end').value = subject.end || '';
            document.getElementById('subject-curriculum').value = subject.curriculum || '';
            
            openModal('subject-modal');
        }

        // MODIFICADA para atualizar informações adicionais da disciplina
        function updateSubject(subjectId, subjectData) {
            const index = subjects.findIndex(s => s.id === subjectId);
            if (index === -1) return;
            
            subjects[index] = { id: subjectId, ...subjectData };
            saveToLocalStorage();
            loadSubjects();
            loadSubjectsToSelects();
            
            // Atualizar também as aulas relacionadas a esta disciplina
            const classIndex = classes.findIndex(c => c.subjectId === subjectId);
            if (classIndex !== -1 && subjectData.day && subjectData.start && subjectData.end) {
                classes[classIndex] = {
                    ...classes[classIndex],
                    day: subjectData.day,
                    start: subjectData.start,
                    end: subjectData.end
                };
                saveToLocalStorage();
                loadClassesToTimetable();
            }
            
            showToast('Disciplina atualizada com sucesso!');
        }

        function deleteSubject(subjectId) {
            // Verificar se a disciplina está sendo usada em alguma aula
            const classUsingSubject = classes.find(c => c.subjectId === subjectId);
            if (classUsingSubject) {
                showToast('Não é possível excluir esta disciplina pois ela está sendo usada em uma aula.', true);
                return;
            }
            
            // Verificar se a disciplina está sendo usada em alguma tarefa
            const taskUsingSubject = tasks.find(t => t.subjectId === subjectId);
            if (taskUsingSubject) {
                showToast('Não é possível excluir esta disciplina pois ela está sendo usada em uma tarefa.', true);
                return;
            }
            
            if (confirm('Tem certeza que deseja excluir esta disciplina?')) {
                subjects = subjects.filter(s => s.id !== subjectId);
                saveToLocalStorage();
                loadSubjects();
                loadSubjectsToSelects();
                showToast('Disciplina excluída com sucesso!');
            }
        }

        function addSemester(semesterData) {
            const newId = semesters.length > 0 ? Math.max(...semesters.map(s => s.id)) + 1 : 1;
            semesters.push({ id: newId, ...semesterData });
            saveToLocalStorage();
            loadSemesters();
            showToast('Semestre adicionado com sucesso!');
        }

        function editSemester(semesterId) {
            const semester = semesters.find(s => s.id === semesterId);
            if (!semester) return;
            
            document.getElementById('semester-modal-title').textContent = 'Editar Semestre';
            document.getElementById('semester-id').value = semester.id;
            document.getElementById('semester-name').value = semester.name;
            document.getElementById('semester-start').value = semester.start;
            document.getElementById('semester-end').value = semester.end;
            
            openModal('semester-modal');
        }

        function updateSemester(semesterId, semesterData) {
            const index = semesters.findIndex(s => s.id === semesterId);
            if (index === -1) return;
            
            semesters[index] = { id: semesterId, ...semesterData };
            saveToLocalStorage();
            loadSemesters();
            showToast('Semestre atualizada com sucesso!');
        }

        function deleteSemester(semesterId) {
            if (confirm('Tem certeza que deseja excluir este semestre?')) {
                semesters = semesters.filter(s => s.id !== semesterId);
                saveToLocalStorage();
                loadSemesters();
                showToast('Semestre excluído com sucesso!');
            }
        }

        function addExtraHours(activityData) {
            const newId = extraHours.length > 0 ? Math.max(...extraHours.map(a => a.id)) + 1 : 1;
            extraHours.push({ id: newId, ...activityData });
            saveToLocalStorage();
            loadExtraHours();
            showToast('Atividade adicionada com sucesso!');
        }

        function editExtraHours(activityId) {
            const activity = extraHours.find(a => a.id === activityId);
            if (!activity) return;
            
            document.getElementById('extra-hours-modal-title').textContent = 'Editar Atividade';
            document.getElementById('extra-hours-id').value = activity.id;
            document.getElementById('extra-hours-name').value = activity.name;
            document.getElementById('extra-hours-type').value = activity.type || '';
            document.getElementById('extra-hours-date').value = activity.date;
            document.getElementById('extra-hours-hours').value = activity.hours;
            document.getElementById('extra-hours-description').value = activity.description || '';
            
            openModal('extra-hours-modal');
        }

        function updateExtraHours(activityId, activityData) {
            const index = extraHours.findIndex(a => a.id === activityId);
            if (index === -1) return;
            
            extraHours[index] = { id: activityId, ...activityData };
            saveToLocalStorage();
            loadExtraHours();
            showToast('Atividade atualizada com sucesso!');
        }

        function deleteExtraHours(activityId) {
            if (confirm('Tem certeza que deseja excluir esta atividade?')) {
                extraHours = extraHours.filter(a => a.id !== activityId);
                saveToLocalStorage();
                loadExtraHours();
                showToast('Atividade excluída com sucesso!');
            }
        }

        // Funções para manipulação de modais
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function resetForm(formId) {
            document.getElementById(formId).reset();
            document.getElementById(formId).querySelector('input[type="hidden"]').value = '';
        }

        // Funções para LocalStorage
        function saveToLocalStorage() {
            localStorage.setItem('lexscholar_subjects', JSON.stringify(subjects));
            localStorage.setItem('lexscholar_classes', JSON.stringify(classes));
            localStorage.setItem('lexscholar_tasks', JSON.stringify(tasks));
            localStorage.setItem('lexscholar_semesters', JSON.stringify(semesters));
            localStorage.setItem('lexscholar_extraHours', JSON.stringify(extraHours));
        }

        function loadFromLocalStorage() {
            const savedSubjects = localStorage.getItem('lexscholar_subjects');
            const savedClasses = localStorage.getItem('lexscholar_classes');
            const savedTasks = localStorage.getItem('lexscholar_tasks');
            const savedSemesters = localStorage.getItem('lexscholar_semesters');
            const savedExtraHours = localStorage.getItem('lexscholar_extraHours');
            
            if (savedSubjects) subjects = JSON.parse(savedSubjects);
            if (savedClasses) classes = JSON.parse(savedClasses);
            if (savedTasks) tasks = JSON.parse(savedTasks);
            if (savedSemesters) semesters = JSON.parse(savedSemesters);
            if (savedExtraHours) extraHours = JSON.parse(savedExtraHours);
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar dados do localStorage
            loadFromLocalStorage();
            
            // Carregar dados iniciais
            loadSubjectsToSelects();
            loadClassesToTimetable();
            loadTasks();
            loadSubjects();
            loadSemesters();
            loadExtraHours();
            
            // Atualizar data atual
            const dateDisplay = document.querySelector('.date-display');
            const today = new Date();
            dateDisplay.textContent = today.toLocaleDateString('pt-BR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            
            // Menu toggle para mobile
            document.querySelector('.menu-toggle').addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('active');
            });
            
            // Navegação do menu
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    
                    // Ativar item do menu
                    document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Mostrar painel correspondente
                    document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
                    document.getElementById(target).classList.add('active');
                    
                    // Fechar menu em mobile
                    document.querySelector('.sidebar').classList.remove('active');
                });
            });
            
            // Botões para adicionar tarefa
            document.getElementById('add-task-btn').addEventListener('click', function() {
                document.getElementById('task-modal-title').textContent = 'Adicionar Nova Tarefa';
                resetForm('task-form');
                openModal('task-modal');
            });
            
            document.getElementById('add-task-btn-schedule').addEventListener('click', function() {
                document.getElementById('task-modal-title').textContent = 'Adicionar Nova Tarefa';
                resetForm('task-form');
                openModal('task-modal');
            });
            
            // Botões para adicionar aula
            document.getElementById('add-class-btn').addEventListener('click', function() {
                document.getElementById('class-modal-title').textContent = 'Adicionar Nova Aula';
                resetForm('class-form');
                openModal('class-modal');
            });
            
            document.getElementById('add-class-btn-schedule').addEventListener('click', function() {
                document.getElementById('class-modal-title').textContent = 'Adicionar Nova Aula';
                resetForm('class-form');
                openModal('class-modal');
            });
            
            document.getElementById('add-class-btn-timetable').addEventListener('click', function() {
                document.getElementById('class-modal-title').textContent = 'Adicionar Nova Aula';
                resetForm('class-form');
                openModal('class-modal');
            });
            
            // Botão para adicionar disciplina
            document.getElementById('add-subject-btn').addEventListener('click', function() {
                document.getElementById('subject-modal-title').textContent = 'Adicionar Nova Disciplina';
                resetForm('subject-form');
                openModal('subject-modal');
            });
            
            // Botão para adicionar trabalho
            document.getElementById('add-assignment-btn').addEventListener('click', function() {
                document.getElementById('task-modal-title').textContent = 'Adicionar Novo Trabalho';
                resetForm('task-form');
                document.getElementById('task-type').value = 'assignment';
                openModal('task-modal');
            });
            
            // Botão para adicionar prova
            document.getElementById('add-exam-btn').addEventListener('click', function() {
                document.getElementById('task-modal-title').textContent = 'Adicionar Nova Prova';
                resetForm('task-form');
                document.getElementById('task-type').value = 'exam';
                openModal('task-modal');
            });
            
            // Botão para adicionar semestre
            document.getElementById('add-semester-btn').addEventListener('click', function() {
                document.getElementById('semester-modal-title').textContent = 'Adicionar Novo Semestre';
                resetForm('semester-form');
                openModal('semester-modal');
            });
            
            // Botão para adicionar horas complementares
            document.getElementById('add-extra-hours-btn').addEventListener('click', function() {
                document.getElementById('extra-hours-modal-title').textContent = 'Adicionar Nova Atividade';
                resetForm('extra-hours-form');
                openModal('extra-hours-modal');
            });
            
            // Fechar modais
            document.querySelectorAll('.close-modal, .modal-footer .btn:not(.btn-primary)').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    closeModal(modal.id);
                });
            });
            
            // Salvar tarefa
            document.getElementById('save-task').addEventListener('click', function() {
                const form = document.getElementById('task-form');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const taskData = {
                    title: document.getElementById('task-title').value,
                    type: document.getElementById('task-type').value,
                    subjectId: document.getElementById('task-subject').value ? parseInt(document.getElementById('task-subject').value) : null,
                    date: document.getElementById('task-date').value,
                    time: document.getElementById('task-time').value,
                    priority: document.getElementById('task-priority').value,
                    description: document.getElementById('task-description').value
                };
                
                const taskId = document.getElementById('task-id').value;
                if (taskId) {
                    updateTask(parseInt(taskId), taskData);
                } else {
                    addTask(taskData);
                }
                
                closeModal('task-modal');
            });
            
            // Salvar aula
            document.getElementById('save-class').addEventListener('click', function() {
                const form = document.getElementById('class-form');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const classData = {
                    subjectId: parseInt(document.getElementById('class-subject').value),
                    day: document.getElementById('class-day').value,
                    start: document.getElementById('class-start').value,
                    end: document.getElementById('class-end').value,
                    location: document.getElementById('class-location').value,
                    professor: document.getElementById('class-professor').value
                };
                
                const classId = document.getElementById('class-id').value;
                if (classId) {
                    updateClass(parseInt(classId), classData);
                } else {
                    addClass(classData);
                }
                
                closeModal('class-modal');
            });
            
            // MODIFICADA para salvar informações adicionais da disciplina
            document.getElementById('save-subject').addEventListener('click', function() {
                const form = document.getElementById('subject-form');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const subjectData = {
                    name: document.getElementById('subject-name').value,
                    day: document.getElementById('subject-day').value,
                    start: document.getElementById('subject-start').value,
                    end: document.getElementById('subject-end').value,
                    curriculum: document.getElementById('subject-curriculum').value
                };
                
                const subjectId = document.getElementById('subject-id').value;
                if (subjectId) {
                    updateSubject(parseInt(subjectId), subjectData);
                } else {
                    addSubject(subjectData);
                }
                
                closeModal('subject-modal');
            });
            
            // Salvar semestre
            document.getElementById('save-semester').addEventListener('click', function() {
                const form = document.getElementById('semester-form');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const semesterData = {
                    name: document.getElementById('semester-name').value,
                    start: document.getElementById('semester-start').value,
                    end: document.getElementById('semester-end').value
                };
                
                const semesterId = document.getElementById('semester-id').value;
                if (semesterId) {
                    updateSemester(parseInt(semesterId), semesterData);
                } else {
                    addSemester(semesterData);
                }
                
                closeModal('semester-modal');
            });
            
            // Salvar horas complementares
            document.getElementById('save-extra-hours').addEventListener('click', function() {
                const form = document.getElementById('extra-hours-form');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const activityData = {
                    name: document.getElementById('extra-hours-name').value,
                    type: document.getElementById('extra-hours-type').value,
                    date: document.getElementById('extra-hours-date').value,
                    hours: parseFloat(document.getElementById('extra-hours-hours').value),
                    description: document.getElementById('extra-hours-description').value
                };
                
                const activityId = document.getElementById('extra-hours-id').value;
                if (activityId) {
                    updateExtraHours(parseInt(activityId), activityData);
                } else {
                    addExtraHours(activityData);
                }
                
                closeModal('extra-hours-modal');
            });
            
            // Configurações de horas complementares
            document.getElementById('required-hours-input').addEventListener('change', function() {
                const requiredHours = parseInt(this.value) || 200;
                const totalHours = extraHours.reduce((sum, activity) => sum + activity.hours, 0);
                document.getElementById('remaining-hours').textContent = Math.max(0, requiredHours - totalHours);
            });
        });
    </script>
</body>
</html>
